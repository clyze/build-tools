apply plugin: 'groovy'
apply plugin: 'ivy-publish'

group = 'org.clyze'
version = '1.0-SNAPSHOT'

sourceCompatibility = "1.8"
targetCompatibility = "1.8"

task wrapper(type: Wrapper) {
    gradleVersion = '2.14'
}

repositories {
    mavenCentral()
    ivy {
        url "../ivy-repo"
    }
}

dependencies {
    compile gradleApi(),
            localGroovy(),
            "commons-cli:commons-cli:1.2"

    compile("org.clyze:doop-jcplugin:1.0-SNAPSHOT") {
        exclude module: "groovy-all"
    }

    compile("org.clyze:doop-client:1.0") {
        exclude module: "groovy-all"
    }

    runtime "org.codehaus.groovy:groovy-all:2.4.7"
}

publishing {
    repositories {
        ivy {
            name "local-ivy-repo"
            url "../ivy-repo"
        }
    }

    publications {

        doopGradlePlugin(IvyPublication) {
            organisation "$group"
            module "${project.name}"
            revision "$version"
            from components.java
        }
    }
}
